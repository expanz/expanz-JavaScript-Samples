<html>
<head>

<link href="css/common.css?1308766139" media="screen" rel="stylesheet" type="text/css" />

<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js'></script>
<script type='text/javascript' src='../../Expanz-JavaScript-SDK/js/knockout-1.2.1.js' ></script>
<script type='text/javascript' src='../../Expanz-JavaScript-SDK/js/jquery.cookies.2.2.0.js'></script>
<script type='text/javascript' src='../../Expanz-JavaScript-SDK/js/expanz.js?987245745' ></script>

<script type='text/javascript'>

   function success( result ) {}
   function error( errorString ) {
      console.log( 'error fn: ' + errorString );
   }

   function listAllOrdersForCustomerSelector(){
      return $('#ListAllOrdersForCustomer > [class="selected"]').attr('id');
   }

   $(document).ready( function(){

      $('#menu .menuitem').click(   function(){
            $(this).find('ul').toggle( );
      });
      $('#menu .menuitem ul').hide();

   });

   $(document).ExpanzLoad( function(){

      $('tr').click( function(){
         $(this).siblings().each( function(){ $(this).removeClass('selected'); } );
         $(this).addClass('selected');
      });

      $('button#properties').click( function(){
         $('#lightbox').html( '<div id="container" class="Activity" name="ESA.Sales.SalesOrder" initialKey="' + $('.selected').attr('id').replace(/.*_/,'') +'" ></div>' );

         $.get(   'activity.sales.salesorder.properties.html',
                  function(html){ 
                     $('#lightbox > #container').html( html );
                     DynamicLoadActivity();
                  });
         
         
         $('#lightbox').show('slow');
         return false;
      })
   });

   function closeLightbox(){
      $('#lightbox').hide('slow');
   }

</script>

</head>
<body>

<div id='menu'>
</div>

<div id='container' class='Activity' name='ESA.Sales.SalesOrder' >

   <div class='GridView' id='ListAllOrdersForCustomer' popluateMethod="ListAllOrdersForCustomer">
   </div>

   <div class='submit'>
      <button  id='properties'>Properties</button>
      <button  id='submit' 
               method-name='New'
	       data-bind='click: Method'>
	          New Order 
	       </button>
   </div>

</div>

<div id='lightbox'></div>

</body>
</html>
